{% load i18n %}
{% load gross net tax from prices_i18n %}

{% with total=checkout.get_total %}
  <div class="checkout__review">
    <h3 class="checkout__review__tittle">{% trans "Order review" %}</h3>
    {% for delivery, delivery_cost, total_with_delivery in checkout.deliveries %}
      {% for item, item_price_per_item, item_price_total in delivery %}
        <div class="row">
          <div class="col-8">
            <p><strong>{{ item.variant.product }}</strong> x {{ item.quantity }}<br>
              <span class="checkout__review__variant">{{ item.variant }}</span></p>
          </div>
          <div class="col-4">
            <p class="float-right">{% gross item_price_total %}</p>
          </div>
        </div>
      {% endfor %}
    {% endfor %}
    <div class="row checkout__review__section">
      <div class="col-8">
        <p>{% trans "Delivery" %}</p>
      </div>
      <div class="col-4">
        <p class="float-right">{% if checkout.shipping_method %}
          {% gross checkout.get_total_shipping %}
        {% else %}
          &mdash;
        {% endif %}</p>
      </div>
    </div>
    <div class="row checkout__review__section">
      <div class="col-12">
        <h3>{% trans "Promo code" %}</h3>
        {% include 'checkout/snippets/voucher-form.html' with discount=checkout.discount form=voucher_form %}
      </div>
    </div>
    <div class="row checkout__review__section">
      <div class="col-8">
        <h3>{% trans "Total net" %}</h3>
      </div>
      <div class="col-4">
        <h3 class="float-right">{% net total %}</h3>
      </div>
      <div class="col-8">
        <h3>{% trans "Tax included" %}</h3>
      </div>
      <div class="col-4">
        <h3 class="float-right">{% tax total %}</h3>
      </div>
      <div class="col-8">
        <h3>{% trans "Total" %}</h3>
      </div>
      <div class="col-4">
        <h3 class="float-right">{% gross total %}</h3>
      </div>
    </div>
  </div>
{% endwith %}
